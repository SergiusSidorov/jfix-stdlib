language: java
jdk:
- openjdk11
cache:
  directories:
  - "$HOME/.gradle"
jobs:
  include:
    - stage: build
      if: tag IS blank
      install: skip
      before_script: if [[ $encrypted_d0c8c7a16e6b_key ]]; then openssl aes-256-cbc -K $encrypted_d0c8c7a16e6b_key -iv $encrypted_d0c8c7a16e6b_iv -in secring.gpg.enc -out secring.gpg -d; fi
      script: ./gradlew clean build

    - stage: deploy
      if: tag =~ ^\d+\.\d+\.\d+$
      install: skip
      before_script: openssl aes-256-cbc -K $encrypted_d0c8c7a16e6b_key -iv $encrypted_d0c8c7a16e6b_iv -in secring.gpg.enc -out secring.gpg -d
      script: ./gradlew --info --stacktrace clean build publishToSonatype closeAndReleaseRepository
env:
  global:
  - signingSecretKeyRingFile="`pwd`/secring.gpg"
  - secure: "OCHl5LGCeswLkLSiHUJJof6qwgNxXa1Cr082hnIYcmoM/2R4h76cKyBX1Gj4pswPbo+sWK/DWtHFoqGrQlE0gcv4sXKrfvsCVtmsTvobb9FvB0IcA7U1fcLYimVOwVIMcmfu2bmgkWLET3WVXYrifp8kt9zFWEq5e0m7mlwZBLkxmJwllG+jWMaEgNFCnMCGygXmtvOtj9/qfVawSNuHW5lEED6DyYDGPAb+9DG/MWBoZ2xrvx18GD8/ac3bk1Hj90DEbqIxShapiLia0Y9OiWWfSOkxd0QFCf76eksuEzS2NDVCS4AJMt0Qbf5ukBlBTSjyB5HUnRAlDy1cgDidh9St6twTeSnaTDjsKnjQhiI9+EJeX9vqukoUvdk+uxhGBHMie/9k08GGp8Diie6aJRbH3dW0gTL/G6xW0raquwheR15hJzfRmsoc26N9x+CMMJZjxdyk+bCznJeWm9/OxkvV8ZWAOLy7da0d5012tHvt5PzIDNgIIYFRTDP+fgx3S+8IUDV92MkRWoLzR/Ib66hQUakSzaboo7V3w2vcIPcC+iNSSunqp2a7tZVHnbLXuP+XLG6b+9ORReTFUCdFJx8FZO3gN9QBDNb6nJNDKXTiMHGZhgTyQ0S+QvU/pnN0YlxlpjvkAqVHprGtXEk5UQnwLkIXrvRtua4eROVCT2Q="
  - secure: "CuLkheFvPtd72GB1ILSQBgl/TiN0o8XLipxYvUn7ayX2ulfBoSr3YrWx6Gw5Nf7Ljq6/TGbZYOuFFiP1WEeyY10StaOs2QOGvP43MBW/7mrssgY247FP5EQCUoOKQPPexQUsZ9y5yGDmhpO5pT83iR82pUq07OYzmHEa/Vi1PruN80Yd0CJBlWJCjX56ovKUSCqmVi1SB5zlvYKCAcbpdN6uyd25ixmzQ8/rRD438SNCV2pHKxLZbpkdILRhpbMxKdm+dnsUC5aLVjgK4JYCqfMEn2Y80/t5Fh9JjRbVKYWhiMwwBoikCQREfeASQ1q+FdyftzPZkssXhoBXpYJf/fMfnsLHj8dAD7yzKSb40W4MdryGx+4mnwRRkSAVE3EYhUTMWyZsjob/OnsPalkXn6mehrLb/63SOJvu5eSkONrKQ7dZ+1DjTbHo9FkuxMBQTCQ0aE9mpGk3plP98OPElUwFvJNlFBiCyiINt4lEF8yB4vquV+K1R6IYzN47Mwb3t+fhPoPurXS8MI/BLv17FdRK1YkB5seiuMjh7eq1Gr/oq5+Dzn/UMpL1NPOrjmb6ePjDYrJOr2mTZWSYumw7Z8AKSQFYmBW2dv3rUJy/d4qkY67O6GrM2301BDb7hOcpa4E1SolBquak3Ogr7B5XpyJfyiQldELh9gh8UIV6dRk="
  - secure: "ktGcckMk/7CyV0EgwErE9bJNV8ahPRyTxMZqoKZJihi084kZOaACNx+6uk5VBqQS3dpBhtv8JHFd2oH45juOcdCJjt6qQin2LIL0yZbS2jO0xynR5cXJTRQM5EnIIONAtq+R+E4Rndo3LbfWugrg12LfvkEqzqsTk8r2EBfg1h0MPkKFTc7MhStxObVI3wanZzNzuCG3lnekzvmFs4Qtv9CSMnZ/GBSfCpvJFDe41eAlFpMhlf2j/munLMdu0Y4iP0IvAiPAzDJqFjTC//G2cPUGjxIMyEn4fDXnJtIsO6zC00ZsOIKu+A/WW6hlJIbo/6qyKlWO/sWTajHst7sGNv1IM/xCoi7lE9nzFnPprOZUJP+7Ap2+XSvkpnI/kf0qx37pZ6BfE2v1TRhdegPi1/dr2sVNfgaif/YLDCDn7qb2kguMK8Dk+t7NAq9N49fTF4avuzlV02+N4JpJPAOcSNKxLxP2p7ut2Z0gs7V0mr00zHdJP5SKGI514knmq5xswDDtRKzA2gjscDqb8X7RiMhgygmPXWFQLUmEE6Yh71KoqM6ssmS3e9JBSzScmDYkFFVkVV9WVOMGf47FgpSECSURQYHu9Ehe3eh/CMKClCxjoO+lCr4mBDxZ5QT3Vo05rhtHoexVtdggK29BfHYg39qLa3HRJyxTOHfQnGMgj7E="
  - secure: "Vv6JNOXu0a6mWd7KYr2ZFYyaKai3NhrstJz9BKA6u6nHQxOnrC5yf4MfqH9TFkjmp3x/M7MLXWByVdRLh2b99puIfQ/stNepE1YCIuX9SSZ+zXWMn9v2DYFxt6SHMo9cp+mQERKNOBYefSEo7dzmvGP1XKSRzL7hda+yUaWkYIXtYpk32Na/Krb0m5yS2hBl0KTeg8PKRMV6wDNJ7saGYnThOvr3zUaAHLJBqrfY1vlagwa75nwZ7ieA5MSAz7a+QWDtKF52ds1YSP03sHX9tD8e5dM6FwROONm17pwM6qiSQ+kACw9YWPpluVuhPRikST43tqu2ayUFHsjXETShtJW8f4Qwpd/ZYt8Os/pNWI7LZDKrbx38TejPEj7OBPZaN9SRxABCT+twUSBcsFlzC8K+/yE1Q312vpk2A8u8/MUH2sAtLGNZ5xf097yuazHlxNEK22N5X0A26zEk53wff6briJPolCVY25pH6Lc5TOH87T9lGoaLlBoNU4zZrGAWZ3z3MEbZgBiNtU20TSVawkXD6r0gNY9yVeeoDwDjjePzfKMobTF6iBkgzDkh3PVkZO+FQEp8+9IJu7oRpSpugGwilbMrNNM0SjMf7Cfa6wyprfZmygx0uT+YPCkGJAEY+Jp1NMOrSlvDKhEgfGWXzWdXF6fiKVrbhdzAPoFNuv0="
  - secure: "FC/XffzJ/jDn6io1jG8zOUHTsu5qbltuQGGST+BWPQwBfmNWb6Z5PIY9CBp1pzUr5wa/58/o2/e6MuxtlXR9t0zrDJ/iPNikQSJ6L9m+TMUv4sn/HBFqMwN/X8cunjtuPK6Z9oG/aHWm8HWmwvRbKGa1GCSEK1hG0KRUoSvbyl//lm5gq7pvIdeQDFeJ4zqpsI9JGEVqPZ8LfEi1EMfJ3N881mpO2wZiXVh/nhSfX3pQdESwQBv4pUnNKtK+aHil7OYOmfDKRwCERjzgAxmK8p9HCceNpW/Qo22hOg9rGW8l8L2b9llcxx5A/ZJkVka7Z4lVY7guvdvyNg7tU914inM3/asP2RKrlMwvy2jt1hLHQ4uCEN79Un2Z0svmAtpN3X9Ziybf4ILY85WUiGOE+GkyZG4MWgCxzLG+IXwDyDm8nwZ+7yzQ2ylFpBs1cBdyUIRU0u93R2PuIu/3y3bQsmeWjQUP52sM7Nkp3ho6K8DCpxEXFTt0edlUpEM8YmMrPsOPlQ9WZ9RUBvc0zPK/pF6t3N0zEG+wMoueuhQwpfFPjsZfsl4jqx/7e//CzhMXqADYq9L9rzRhTA5c5s40juV6hX+2IqEdrw9XEimrxoggIM3jIwEXFcl9MhEa2tWV5hwpnJm1N+lfTzztHJYwg8L7ZWV8AEslPimx8MMc3LY="
